<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Mini E-commerce UI</title>
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{
      --accent:#5b7fff;
    }
    body{ background:#f7f8fb; }
    .navbar{ background:#fff; }
    .product-card{ transition:transform .2s ease, box-shadow .2s ease; }
    .product-card:hover{ transform:translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,.08); }
    .price{ font-weight:700; }
    .old-price{ text-decoration:line-through; color:#999; font-weight:500; }
    .badge-cat{ background:rgba(91,127,255,.1); color:#2c49d8; }
    .wishlist{ color:#bbb; transition:color .2s; }
    .wishlist.active{ color:var(--accent); }
    .filter-card{ position:sticky; top:90px; }
    .rating i{ color:#ffb400; }
    .form-range::-webkit-slider-thumb{ background:var(--accent); }
    .btn-primary{ background:var(--accent); border-color:var(--accent); }
    .btn-outline-primary{ color:var(--accent); border-color:var(--accent); }
    .btn-outline-primary:hover{ background:var(--accent); color:#fff; }
    .search-input{ border-radius:14px; }
    .tag{ font-size:.75rem; padding:.25rem .5rem; border-radius:999px; background:#eef2ff; color:#3b5bdb; }
    .offcanvas{ width:min(480px, 100%); }
  </style>
</head>
<body>

<!-- NAV -->
<nav class="navbar navbar-expand-lg border-bottom sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#"><i class="bi bi-bag-check-fill me-2 text-primary"></i>ShopLite</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-3">
        <li class="nav-item">
          <div class="input-group my-2 my-lg-0">
            <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
            <input id="searchBox" class="form-control search-input" placeholder="Search products...">
          </div>
        </li>
        <li class="nav-item">
          <button class="btn btn-outline-primary ms-lg-2" data-bs-toggle="offcanvas" data-bs-target="#cartCanvas">
            <i class="bi bi-cart3"></i>
            <span class="ms-1">Cart</span>
            <span id="cartCount" class="badge text-bg-primary rounded-pill ms-1">0</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- MAIN -->
<main class="container py-4">
  <div class="row g-4">
    <!-- FILTERS -->
    <aside class="col-lg-3">
      <div class="card filter-card shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0">Filters</h5>
            <button id="clearFilters" class="btn btn-sm btn-link">Clear</button>
          </div>
          <hr>
          <h6 class="text-secondary">Category</h6>
          <div class="form-check"><input class="form-check-input cat" type="checkbox" value="Fashion" id="c1"><label class="form-check-label" for="c1">Fashion</label></div>
          <div class="form-check"><input class="form-check-input cat" type="checkbox" value="Electronics" id="c2"><label class="form-check-label" for="c2">Electronics</label></div>
          <div class="form-check"><input class="form-check-input cat" type="checkbox" value="Home" id="c3"><label class="form-check-label" for="c3">Home</label></div>
          <div class="form-check"><input class="form-check-input cat" type="checkbox" value="Beauty" id="c4"><label class="form-check-label" for="c4">Beauty</label></div>

          <hr>
          <h6 class="text-secondary">Price (₹)</h6>
          <div class="d-flex justify-content-between"><span id="minLbl">0</span><span id="maxLbl">5000</span></div>
          <input id="priceRange" type="range" min="0" max="5000" step="50" class="form-range" value="5000">

          <hr>
          <h6 class="text-secondary">Sort by</h6>
          <select id="sortBy" class="form-select">
            <option value="featured">Featured</option>
            <option value="price-asc">Price: Low to High</option>
            <option value="price-desc">Price: High to Low</option>
            <option value="rating-desc">Rating: High to Low</option>
            <option value="newest">Newest</option>
          </select>
        </div>
      </div>
    </aside>

    <!-- PRODUCTS -->
    <section class="col-lg-9">
      <div class="d-flex flex-wrap align-items-center justify-content-between mb-3">
        <div class="d-flex flex-wrap align-items-center gap-2" id="activeTags"></div>
        <small class="text-secondary" id="countText"></small>
      </div>

      <div id="grid" class="row g-3">
        <!-- cards injected by JS -->
      </div>
    </section>
  </div>
</main>

<!-- QUICK VIEW MODAL -->
<div class="modal fade" id="quickView" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-body p-4">
        <div class="row g-4 align-items-center">
          <div class="col-md-6">
            <img id="qvImg" class="img-fluid rounded-3 shadow-sm" alt="">
          </div>
          <div class="col-md-6">
            <h5 id="qvTitle" class="mb-1"></h5>
            <div class="rating small mb-2" id="qvRating"></div>
            <div class="mb-2">
              <span id="qvPrice" class="price h5 me-2"></span>
              <span id="qvOld" class="old-price"></span>
            </div>
            <p id="qvDesc" class="text-secondary small"></p>
            <div class="d-flex gap-2">
              <button id="qvAdd" class="btn btn-primary"><i class="bi bi-cart-plus"></i> Add to Cart</button>
              <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
            </div>
            <div class="mt-3"><span class="badge badge-cat" id="qvCat"></span></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CART OFFCANVAS -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="cartCanvas">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title"><i class="bi bi-cart3 me-2"></i>Your Cart</h5>
    <button class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body d-flex flex-column">
    <div id="cartItems" class="vstack gap-3"></div>
    <div class="mt-auto pt-3 border-top">
      <div class="d-flex justify-content-between fw-semibold mb-2">
        <span>Total</span><span id="cartTotal">₹0</span>
      </div>
      <button class="btn btn-primary w-100" id="checkoutBtn"><i class="bi bi-credit-card-2-front"></i> Checkout</button>
    </div>
  </div>
</div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
/* ----------- DATA ----------- */
const PRODUCTS = [
  {id:1, title:"Classic Tee", category:"Fashion", price:699, old:999, rating:4.5, img:"classic tee.jpg" , desc:"100% cotton unisex tee. Soft & comfy.", created:"2025-06-01"},
  {id:2, title:"Wireless Earbuds", category:"Electronics", price:1499, old:1999, rating:4.2, img:"earbuds.png", desc:"Bluetooth 5.3, 24h battery.", created:"2025-07-15"},
  {id:3, title:"Ceramic Mug", category:"Home", price:349, old:499, rating:4.7, img:"mugs.jpeg", desc:"350ml matte finish mug.", created:"2025-05-20"},
  {id:4, title:"Desk Lamp", category:"Home", price:1299, old:1499, rating:4.1, img:"lamp.jpg", desc:"LED lamp with 3 brightness modes.", created:"2025-03-18"},
  {id:5, title:"Moisturizer", category:"Beauty", price:499, old:599, rating:4.4, img:"moisturizer.png", desc:"Lightweight daily hydrating cream.", created:"2025-02-10"},
  {id:6, title:"Smartwatch Lite", category:"Electronics", price:2799, old:3299, rating:4.0, img:"watch.png", desc:"Heart-rate, steps, notifications.", created:"2025-08-01"},
  {id:7, title:"Denim Jacket", category:"Fashion", price:1699, old:2199, rating:4.6, img:"jacket.png", desc:"Regular fit, timeless style.", created:"2025-04-30"},
  {id:8, title:"Lipstick Matte", category:"Beauty", price:299, old:399, rating:4.3, img:"lipstic.jpeg", desc:"Long-lasting matte finish.", created:"2025-06-21"},
  {id:9, title:"Backpack 20L", category:"Fashion", price:1199, old:1499, rating:4.2, img:"bagpack.jpg", desc:"Water-resistant, laptop sleeve.", created:"2025-05-05"},
  {id:10,title:"Bluetooth Speaker", category:"Electronics", price:1899, old:2399, rating:4.5, img:"speaker.jpg", desc:"Deep bass, 12h playtime.", created:"2025-07-28"},
];

/* ----------- STATE ----------- */
let state = {
  search:"",
  cats:new Set(),
  maxPrice:5000,
  sort:"featured",
  wishlist:new Set(JSON.parse(localStorage.getItem("wl")||"[]")),
  cart:JSON.parse(localStorage.getItem("cart")||"{}")
};

const saveCart=()=>localStorage.setItem("cart", JSON.stringify(state.cart));
const saveWL=()=>localStorage.setItem("wl", JSON.stringify([...state.wishlist]));

/* ----------- HELPERS ----------- */
const fmt = n => "₹"+n.toLocaleString("en-IN");
const stars = r => '<i class="bi bi-star-fill"></i>'.repeat(Math.floor(r)) + (r%1>=.5?'<i class="bi bi-star-half"></i>':'');
const createdTime = s => new Date(s).getTime();

/* ----------- RENDER PRODUCTS ----------- */
function render(){
  const q = state.search.trim().toLowerCase();
  let list = PRODUCTS.filter(p =>
     (q==="" || p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q)) &&
     (state.cats.size===0 || state.cats.has(p.category)) &&
     (p.price<=state.maxPrice)
  );

  switch(state.sort){
    case "price-asc": list.sort((a,b)=>a.price-b.price); break;
    case "price-desc": list.sort((a,b)=>b.price-a.price); break;
    case "rating-desc": list.sort((a,b)=>b.rating-a.rating); break;
    case "newest": list.sort((a,b)=>createdTime(b.created)-createdTime(a.created)); break;
    default: /* featured */ break;
  }

  $("#countText").text(`${list.length} product(s)`);
  const $grid = $("#grid").empty();

  list.forEach(p=>{
    const inWL = state.wishlist.has(p.id);
    const card = $(`
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card h-100 product-card">
          <div class="position-relative">
            <img class="card-img-top" src="${p.img}" alt="${p.title}">
            <button class="btn btn-light position-absolute top-0 end-0 m-2 rounded-circle wishlist ${inWL?'active':''}" data-id="${p.id}" aria-label="wishlist">
              <i class="bi bi-heart${inWL?'-fill':''}"></i>
            </button>
            <span class="badge badge-cat position-absolute m-2">${p.category}</span>
          </div>
          <div class="card-body d-flex flex-column">
            <h6 class="card-title">${p.title}</h6>
            <div class="rating small mb-2">${stars(p.rating)}</div>
            <div class="mb-3">
              <span class="price me-2">${fmt(p.price)}</span>
              <span class="old-price">${fmt(p.old)}</span>
            </div>
            <div class="mt-auto d-grid gap-2">
              <button class="btn btn-primary add-cart" data-id="${p.id}"><i class="bi bi-cart-plus"></i> Add to Cart</button>
              <button class="btn btn-outline-primary quick" data-id="${p.id}" data-bs-toggle="modal" data-bs-target="#quickView"><i class="bi bi-eye"></i> Quick View</button>
            </div>
          </div>
        </div>
      </div>
    `);
    $grid.append(card);
  });

  // active tags
  const $tags = $("#activeTags").empty();
  if(state.search) $tags.append(`<span class="tag">Search: ${state.search}</span>`);
  if(state.cats.size>0) $tags.append([...state.cats].map(c=>`<span class="tag">${c}</span>`).join(""));
  if(state.maxPrice<5000) $tags.append(`<span class="tag">≤ ${fmt(state.maxPrice)}</span>`);
}

/* ----------- CART RENDER ----------- */
function renderCart(){
  const $list = $("#cartItems").empty();
  let total = 0;
  Object.entries(state.cart).forEach(([id,qty])=>{
    const p = PRODUCTS.find(x=>x.id==id);
    if(!p) return;
    total += p.price*qty;
    $list.append(`
      <div class="d-flex align-items-center gap-3">
        <img src="${p.img}" width="64" height="64" class="rounded">
        <div class="flex-grow-1">
          <div class="d-flex justify-content-between">
            <strong>${p.title}</strong>
            <span>${fmt(p.price*qty)}</span>
          </div>
          <div class="d-flex align-items-center gap-2 mt-1">
            <button class="btn btn-sm btn-outline-secondary qty" data-id="${p.id}" data-delta="-1">-</button>
            <span>${qty}</span>
            <button class="btn btn-sm btn-outline-secondary qty" data-id="${p.id}" data-delta="1">+</button>
            <button class="btn btn-sm btn-link text-danger remove" data-id="${p.id}"><i class="bi bi-trash"></i></button>
          </div>
        </div>
      </div>
    `);
  });
  $("#cartTotal").text(fmt(total));
  const count = Object.values(state.cart).reduce((a,b)=>a+b,0);
  $("#cartCount").text(count);
}

/* ----------- EVENTS ----------- */
$(document).on("input", "#searchBox", function(){
  state.search = $(this).val();
  render();
});

$(".cat").on("change", function(){
  const val = $(this).val();
  if(this.checked) state.cats.add(val); else state.cats.delete(val);
  render();
});

$("#priceRange").on("input change", function(){
  state.maxPrice = +$(this).val();
  $("#maxLbl").text(state.maxPrice);
  render();
});

$("#sortBy").on("change", function(){
  state.sort = $(this).val();
  render();
});

$("#clearFilters").on("click", function(){
  state.search=""; $("#searchBox").val("");
  state.cats.clear(); $(".cat").prop("checked", false);
  state.maxPrice=5000; $("#priceRange").val(5000); $("#maxLbl").text(5000);
  state.sort="featured"; $("#sortBy").val("featured");
  render();
});

$(document).on("click", ".wishlist", function(){
  const id = +$(this).data("id");
  if(state.wishlist.has(id)) state.wishlist.delete(id); else state.wishlist.add(id);
  saveWL();
  render();
});

$(document).on("click", ".add-cart", function(){
  const id = $(this).data("id");
  state.cart[id] = (state.cart[id]||0)+1;
  saveCart();
  renderCart();
});

$(document).on("click", ".quick", function(){
  const p = PRODUCTS.find(x=>x.id==$(this).data("id"));
  if(!p) return;
  $("#qvImg").attr("src", p.img).attr("alt", p.title);
  $("#qvTitle").text(p.title);
  $("#qvRating").html(stars(p.rating));
  $("#qvPrice").text(fmt(p.price));
  $("#qvOld").text(fmt(p.old));
  $("#qvDesc").text(p.desc);
  $("#qvCat").text(p.category);
  $("#qvAdd").data("id", p.id);
});

$("#qvAdd").on("click", function(){
  const id = $(this).data("id");
  state.cart[id] = (state.cart[id]||0)+1;
  saveCart();
  renderCart();
  const modal = bootstrap.Modal.getInstance(document.getElementById("quickView"));
  modal.hide();
});

$(document).on("click", ".qty", function(){
  const id = $(this).data("id");
  const d  = +$(this).data("delta");
  state.cart[id] = Math.max(1, (state.cart[id]||1)+d);
  saveCart(); renderCart();
});

$(document).on("click", ".remove", function(){
  const id = $(this).data("id");
  delete state.cart[id];
  saveCart(); renderCart();
});

$("#checkoutBtn").on("click", function(){
  if(Object.keys(state.cart).length===0){ alert("Your cart is empty."); return; }
  alert("Demo checkout — integrate payment later.");
});

/* ----------- INIT ----------- */
$(function(){
  $("#minLbl").text(0);
  $("#maxLbl").text(5000);
  render();
  renderCart();
});
</script>
</body>
</html>
